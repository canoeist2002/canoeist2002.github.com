---
layout: post
title: "ruby arrays"
description: "ruby arrays"
category: ruby
tags: [ruby, program]
---
{% include JB/setup %}

在编程过程中，最常用到的数据结构就包括 array ，所以掌握到 array 的使用是非常重要的。Array 是一种有序的序列，可以在其中储存各种对象，对，各种的，包括数值，字符串，对象。

## Array 创建

Array 的创建是非常容易的，一般都是通过下面的方面来创建一个 Array 的：

    >> num = [1, 2, 3, 4]
    => [1, 2, 3, 4]
    >> num[0]
    => 1
    >> num[5]
    => nil

可以通过上面的这些方式来创建 array，也可以通过下面的两种来创建新的 array，一种是给变量赋值一个空的数组，另一种方法是使用 Array 类来创建一个新的实例。

    >> a1 = []
    => []
    >> a2 = Array.new
    => []
    >> a1.class
    => Array
    >> a2.class
    => Array

你还可以通过给 new 方法来指定参数完成创建的过程，第一个参数是数组元素的个数，第二个参数是内容，如果省略第二个参数的话，刚会创建 nil 对象：

    >> Array.new(3)
    => [nil, nil, nil]
    >> Array.new(3, 3)
    => [3, 3, 3]
    >> Array.new(3) {|num| num + 1}
    => [1, 2, 3]


这里也还有一种特殊的方式，是使用 %w 或者 %W 来创建，元素之间无须使用“ , ”号来分隔元素，只需要使用空格就可以了。

    >> a3 = %w[this is a new array]
    => ["this", "is", "a", "new", "array"]
    >> a3.class
    => Array

同时，还可以通过 to_a() 方法，来将 Range 对象转换成数组元素：

    >> (1..9).to_a
    => [1, 2, 3, 4, 5, 6, 7, 8, 9]
    >> ('a'..'e').to_a
    => ["a", "b", "c", "d", "e"]

Ruby 中的数组元素可以是任何对象，这也是解释性语言中一个非常方便的功能，元素不必为统一的对象，下面是一个例子：

    >> mix = [1, "a", true, [1, 2, 3]]
    => [1, "a", true, [1, 2, 3]]
    >> mix.class
    => Array

这个叫 mix 的数组中有数字对象，字符串对象，布尔对象和数组对象，非常的易用。

## Array 访问

Array 是有序的集合，和所有其它的编程语言一样，从序号 0 开始计数，也就是第一个元素是 0，第二个元素是 1。如果你去访问 array 中不存在的元素的话，ruby 不会返回错误，只会返回一个 nil 对象，这点和其它的编程语言是不一样的。

用上面已经创建好的 num 数组来访问看下效果：

    >> num[0]
    => 1
    >> num[5]       #访问不存在的元素
    => nil

同时还有一些访问方法，可以通过数组长度来访问，也可以通过负数来访问。Array 中的最后一个元素记做 -1，倒数第二个元素记做 -2，看下演示：

    >> num[-1]
    => 4
    >> num[num.size]      #num.size 是数组的长度，这里为 4
    => nil                #num 数组的最后一个元素为 num[3]，num[4] 就是 nil
    >> num[num.size - 1]
    => 4
    >> num[-num.size]
    => 1

还可以访问数据内容的范围，同样也是使用 [ ] 方法来操作，第一个参数同样是数组中元素的位置，第二个参数为需要返回的元素个数。

    >> num = (1..9).to_a        # 对 num 数组重新进行赋值
    => [1, 2, 3, 4, 5, 6, 7, 8, 9]
    >> num[2, 3]
    => [3, 4, 5]
    >> num[7, 3]
    => [8, 9]

那如何访问数组中从第几个元素到第几个元素这样的内容，可以使用 Range 来进行操作：

    >> num[3..5]        #从第 4 个元素到第 6 个元素
    => [4, 5, 6]
    >> num[3..-1]       #从第 4 个元素到最后一个元素
    => [4, 5, 6, 7, 8, 9]

## Array 元素赋值

## 参考资料

Ruby 1.9.3  (Array)[http://www.ruby-doc.org/core-1.9.3/Array.html]
Ruby 2.0 (Array)[http://www.ruby-doc.org/core-2.0/Array.html]